# Xonotic - Flatpak Builder manifest

This is a very rough early proof of concept for building Xonotic within a Flatpak environment. This is not recommended for use. It will create a very large unoptimised package.

## Prerequisites

```bash
flatpak install flathub org.freedesktop.Sdk//1.6
flatpak install flathub org.freedesktop.Platform//1.6
```

## Build and install

Clone the repository and from within it run:
```bash
flatpak-builder --user --install --disable-updates --force-clean xonotic org.xonotic.Xonotic.json
```

## What needs doing to make this suitable for distribution
Xonotic's build system will only create releases via the official build servers and for the most part this is fine but we need to be able to build the proper engine binary that does not require calling darkplaces with the xonotic game switch.

All the assets (.pkg, sounds, maps, textures) could be pulled from the build server via flatpak-builder by specifing them as sources. This source list would ideally be generated by Xonotic's existing build system which would output the complete json build manifest. E.g.

```json
...

 "modules":[
    {
      "name":"Xonotic",
      ...
       "sources":[
         // Auto-generated asset sources.
        {
          "type":"file",
          "url":"http://beta.xonotic.org/autobuild-bsp/_hudsetup-d81cd9ea35dbeed57a09863cff216cd34a02c583-3ecd1f9717987ba4f9e9f1864198acbbfd910f8a.pk3",
          "dest": "data/_hudsetup.pk3"
        },
        ...
      ]
 ...
```
